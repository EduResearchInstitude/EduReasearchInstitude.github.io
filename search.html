<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>자료 검색 | 교육(과학)연구원 허브</title>
    <style>
        .container { max-width: 980px; margin: 0 auto; padding: 1rem; }
        .filters { display: flex; gap: .5rem; flex-wrap: wrap; margin-bottom: .75rem; }
        .result { border: 1px solid #e5e7eb; border-radius: 8px; padding: .75rem; margin: .5rem 0; background: #fff; }
        .badge { display: inline-block; padding: 2px 8px; border-radius: 999px; background: #eef2ff; margin-right: .5rem; font-size: .85rem; }
        .muted { color: #6b7280; font-size: .9rem; }
        .count { margin: .5rem 0; font-weight: bold; }
        input, select { padding: .5rem; }
        a.title { font-weight: 700; font-size: 1.05rem; }
        body { font-family: Arial, sans-serif; background-color: #f9fafb; }
    </style>
</head>
<body>
    <div class="container">
        <h1>자료 검색</h1>
        <p>예시 데이터로 동작 중입니다. 나중에 data/index.json만 교체하면 실제 검색이 됩니다.</p>

        <div class="filters">
            <input id="q" type="search" placeholder="제목·요약 검색(예: 창의융합, 실험)" style="flex:1;" />
            <select id="org">
                <option value="">기관 전체</option>
                <option>서울교육연구정보원</option>
                <option>경기도교육연구원</option>
                <option>대구창의융합교육원</option>
                <option>광주창의융합교육원</option>
                <option>전남창의융합교육원</option>
            </select>
            <select id="type">
                <option value="">유형 전체</option>
                <option>보고서</option>
                <option>수업지도안</option>
            </select>
            <select id="year">
                <option value="">연도 전체</option>
                <option>2025</option>
                <option>2024</option>
                <option>2023</option>
                <option>2022</option>
            </select>
        </div>

        <div class="count" id="count"></div>
        <div id="results"></div>
    </div>

    <script>
        // 검색 기능 구현
        document.addEventListener('DOMContentLoaded', function() {
            // 필터 요소들
            const searchInput = document.getElementById('q');
            const orgFilter = document.getElementById('org');
            const typeFilter = document.getElementById('type');
            const yearFilter = document.getElementById('year');
            const resultsDiv = document.getElementById('results');
            const countDiv = document.getElementById('count');
            
            // 모든 필터 요소 배열
            const filters = [searchInput, orgFilter, typeFilter, yearFilter];
            
            // 예시 데이터 (나중에 data/index.json에서 불러올 예정)
            const sampleData = [
                {
                    title: "2024 창의융합 교육 활성화 방안",
                    org: "서울교육연구정보원",
                    type: "보고서",
                    year: "2024",
                    summary: "창의융합 교육의 현황과 발전 방향에 대한 연구",
                    url: "#"
                },
                {
                    title: "과학 실험 수업지도안: 중학교 1학년",
                    org: "경기도교육연구원",
                    type: "수업지도안",
                    year: "2023",
                    summary: "중학교 1학년 과학 실험 수업 지도안 및 교수학습자료",
                    url: "#"
                },
                {
                    title: "AI 활용 교육 프로그램 개발",
                    org: "대구창의융합교육원",
                    type: "보고서",
                    year: "2025",
                    summary: "인공지능을 활용한 교육 프로그램 개발 및 적용 사례",
                    url: "#"
                },
                {
                    title: "고등학교 수학 창의 수업 지도안",
                    org: "광주창의융합교육원",
                    type: "수업지도안",
                    year: "2022",
                    summary: "고등학교 수학 창의력 향상을 위한 교수학습 방법",
                    url: "#"
                }
            ];
            
            // 검색 및 필터링 함수
            function performSearch() {
                const query = searchInput.value.toLowerCase();
                const org = orgFilter.value;
                const type = typeFilter.value;
                const year = yearFilter.value;
                
                const filteredResults = sampleData.filter(item => {
                    // 검색어 필터링
                    const matchesQuery = !query || 
                        item.title.toLowerCase().includes(query) || 
                        item.summary.toLowerCase().includes(query);
                    
                    // 기관 필터링
                    const matchesOrg = !org || item.org === org;
                    
                    // 유형 필터링
                    const matchesType = !type || item.type === type;
                    
                    // 연도 필터링
                    const matchesYear = !year || item.year === year;
                    
                    return matchesQuery && matchesOrg && matchesType && matchesYear;
                });
                
                displayResults(filteredResults);
            }
            
            // 결과 표시 함수
            function displayResults(results) {
                countDiv.textContent = `검색 결과: ${results.length}건`;
                
                if (results.length === 0) {
                    resultsDiv.innerHTML = '<p>검색 결과가 없습니다.</p>';
                    return;
                }
                
                resultsDiv.innerHTML = '';
                results.forEach(item => {
                    const resultDiv = document.createElement('div');
                    resultDiv.className = 'result';
                    resultDiv.innerHTML = `
                        <a href="${item.url}" class="title">${item.title}</a>
                        <div>
                            <span class="badge">${item.org}</span>
                            <span class="badge">${item.type}</span>
                            <span class="badge">${item.year}</span>
                        </div>
                        <p>${item.summary}</p>
                        <p class="muted">원문 링크: <a href="${item.url}" target="_blank">바로가기</a></p>
                    `;
                    resultsDiv.appendChild(resultDiv);
                });
            }
            
            // 이벤트 리스너 등록
            filters.forEach
